
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scan Berkas</title>
<link rel="manifest" href="manifest.json">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f3f4f6; }
header { padding:20px; text-align:center; background:#2563eb; color:white; font-size:24px; }
#video { width:100%; max-width:400px; margin:auto; display:block; border-radius:12px; }
button { padding:14px 22px; font-size:18px; background:#2563eb; border:none; color:white; border-radius:12px; margin-top:20px; width:90%; }
.container { text-align:center; padding:20px; }
</style>
</head>
<body>
<header>Scan Berkas</header>
<div class="container">
<video id="video" autoplay></video>
<button id="startScan">Start Scan</button>
<p id="result"></p>
</div>
<script src="https://unpkg.com/html5-qrcode"></script>
<script>
const API_URL = "https://script.google.com/macros/s/AKfycby4n6cf_tEHfYVP1CIPlasNOISMS0zMafu1pkgjGsigJYIwA47GrK85oxZvIpCKmYmO/exec";

document.getElementById("startScan").addEventListener("click", async () => {
    const codeReader = new Html5Qrcode("video");
    const cameras = await Html5Qrcode.getCameras();
    if (cameras && cameras.length) {
        codeReader.start(
            cameras[0].id,
            { fps: 10, qrbox: 250 },
            async qr => {
                document.getElementById("result").innerText = "Scanned: " + qr;
                const res = await fetch(API_URL, {
                    method: "POST",
                    mode: "no-cors",
                    body: JSON.stringify({ text: qr })
                });
            }
        );
    }
});
</script>
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>
